<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux访问权限控制之ACL | 百草春生</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/assets/img/favicon.ico">
    <meta name="description" content="glaucus技术博客">
    <meta name="author" content="百草春生">
    <meta name="keywords" content="Java,Golang,后端开发">
    
    <link rel="preload" href="/assets/css/0.styles.7305967a.css" as="style"><link rel="preload" href="/assets/js/app.a60af80f.js" as="script"><link rel="preload" href="/assets/js/2.6bc427bd.js" as="script"><link rel="preload" href="/assets/js/74.665afdfe.js" as="script"><link rel="prefetch" href="/assets/js/10.a5e3d93c.js"><link rel="prefetch" href="/assets/js/100.00c86aaa.js"><link rel="prefetch" href="/assets/js/101.28ee35b5.js"><link rel="prefetch" href="/assets/js/102.7779693f.js"><link rel="prefetch" href="/assets/js/103.359357f4.js"><link rel="prefetch" href="/assets/js/11.75712ca1.js"><link rel="prefetch" href="/assets/js/12.2979ec84.js"><link rel="prefetch" href="/assets/js/13.b71512ef.js"><link rel="prefetch" href="/assets/js/14.82d3326b.js"><link rel="prefetch" href="/assets/js/15.f9f3093d.js"><link rel="prefetch" href="/assets/js/16.51dd9ff1.js"><link rel="prefetch" href="/assets/js/17.0db74b9b.js"><link rel="prefetch" href="/assets/js/18.12de42a1.js"><link rel="prefetch" href="/assets/js/19.744b2412.js"><link rel="prefetch" href="/assets/js/20.91442b10.js"><link rel="prefetch" href="/assets/js/21.dcac2fab.js"><link rel="prefetch" href="/assets/js/22.f309628e.js"><link rel="prefetch" href="/assets/js/23.c0034a76.js"><link rel="prefetch" href="/assets/js/24.c4d43955.js"><link rel="prefetch" href="/assets/js/25.cc25fdd5.js"><link rel="prefetch" href="/assets/js/26.cfb70462.js"><link rel="prefetch" href="/assets/js/27.5ff9e71c.js"><link rel="prefetch" href="/assets/js/28.64a0e9e4.js"><link rel="prefetch" href="/assets/js/29.fd07451c.js"><link rel="prefetch" href="/assets/js/3.94f5e9c9.js"><link rel="prefetch" href="/assets/js/30.ccde335c.js"><link rel="prefetch" href="/assets/js/31.f472c9d7.js"><link rel="prefetch" href="/assets/js/32.0ee8786c.js"><link rel="prefetch" href="/assets/js/33.5978dd53.js"><link rel="prefetch" href="/assets/js/34.6ed0e673.js"><link rel="prefetch" href="/assets/js/35.266bbce9.js"><link rel="prefetch" href="/assets/js/36.8fec5b91.js"><link rel="prefetch" href="/assets/js/37.598797b7.js"><link rel="prefetch" href="/assets/js/38.bffc1a9f.js"><link rel="prefetch" href="/assets/js/39.a496adf1.js"><link rel="prefetch" href="/assets/js/4.e5ac8b52.js"><link rel="prefetch" href="/assets/js/40.1c502242.js"><link rel="prefetch" href="/assets/js/41.8e124ccd.js"><link rel="prefetch" href="/assets/js/42.752f28b9.js"><link rel="prefetch" href="/assets/js/43.b58de8ba.js"><link rel="prefetch" href="/assets/js/44.7c43e4ce.js"><link rel="prefetch" href="/assets/js/45.cbb80335.js"><link rel="prefetch" href="/assets/js/46.89d25578.js"><link rel="prefetch" href="/assets/js/47.bf5ae339.js"><link rel="prefetch" href="/assets/js/48.98c7dce0.js"><link rel="prefetch" href="/assets/js/49.fbe69aaf.js"><link rel="prefetch" href="/assets/js/5.c11f0763.js"><link rel="prefetch" href="/assets/js/50.2fcc044a.js"><link rel="prefetch" href="/assets/js/51.99003659.js"><link rel="prefetch" href="/assets/js/52.538d5e22.js"><link rel="prefetch" href="/assets/js/53.e429e1ed.js"><link rel="prefetch" href="/assets/js/54.12c19d84.js"><link rel="prefetch" href="/assets/js/55.0e68945e.js"><link rel="prefetch" href="/assets/js/56.90e8bdf9.js"><link rel="prefetch" href="/assets/js/57.bd49cc5b.js"><link rel="prefetch" href="/assets/js/58.696f8423.js"><link rel="prefetch" href="/assets/js/59.4c8889c1.js"><link rel="prefetch" href="/assets/js/6.513c8ad6.js"><link rel="prefetch" href="/assets/js/60.7b7fc59a.js"><link rel="prefetch" href="/assets/js/61.3a408ed7.js"><link rel="prefetch" href="/assets/js/62.a3630e78.js"><link rel="prefetch" href="/assets/js/63.6ab9d691.js"><link rel="prefetch" href="/assets/js/64.55200531.js"><link rel="prefetch" href="/assets/js/65.a636362c.js"><link rel="prefetch" href="/assets/js/66.93548848.js"><link rel="prefetch" href="/assets/js/67.b4b0ef80.js"><link rel="prefetch" href="/assets/js/68.d1d2dc74.js"><link rel="prefetch" href="/assets/js/69.d4084719.js"><link rel="prefetch" href="/assets/js/7.d7234ee7.js"><link rel="prefetch" href="/assets/js/70.eb2795e9.js"><link rel="prefetch" href="/assets/js/71.a384c362.js"><link rel="prefetch" href="/assets/js/72.ffd104b3.js"><link rel="prefetch" href="/assets/js/73.6e866b22.js"><link rel="prefetch" href="/assets/js/75.ddfc34cd.js"><link rel="prefetch" href="/assets/js/76.3deef890.js"><link rel="prefetch" href="/assets/js/77.ed7f59af.js"><link rel="prefetch" href="/assets/js/78.47663224.js"><link rel="prefetch" href="/assets/js/79.caf768e6.js"><link rel="prefetch" href="/assets/js/8.2ed94147.js"><link rel="prefetch" href="/assets/js/80.be6fcda9.js"><link rel="prefetch" href="/assets/js/81.ce94b545.js"><link rel="prefetch" href="/assets/js/82.10845c61.js"><link rel="prefetch" href="/assets/js/83.fb214e4c.js"><link rel="prefetch" href="/assets/js/84.fe9f3b95.js"><link rel="prefetch" href="/assets/js/85.b6e913aa.js"><link rel="prefetch" href="/assets/js/86.ebf0c7ae.js"><link rel="prefetch" href="/assets/js/87.70d8e15f.js"><link rel="prefetch" href="/assets/js/88.44a94037.js"><link rel="prefetch" href="/assets/js/89.cd714385.js"><link rel="prefetch" href="/assets/js/9.26dd2b53.js"><link rel="prefetch" href="/assets/js/90.495c0af0.js"><link rel="prefetch" href="/assets/js/91.e3dcaece.js"><link rel="prefetch" href="/assets/js/92.938231e1.js"><link rel="prefetch" href="/assets/js/93.24cd1edf.js"><link rel="prefetch" href="/assets/js/94.e7f95d83.js"><link rel="prefetch" href="/assets/js/95.d6eddedc.js"><link rel="prefetch" href="/assets/js/96.fd85d1af.js"><link rel="prefetch" href="/assets/js/97.d8c96ef8.js"><link rel="prefetch" href="/assets/js/98.8d262881.js"><link rel="prefetch" href="/assets/js/99.38434a69.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7305967a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">百草春生</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/pages/8c2319/" class="nav-link">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="模块" class="dropdown-title"><!----> <span class="title" style="display:;">模块</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bf6a41/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/416f59/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/416f59/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/ecb94e/" class="nav-link">Golang</a></li><li class="dropdown-item"><!----> <a href="/pages/eeefb8/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/5111ec/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/de595b/" class="nav-link">折腾</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/glaucus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/pages/8c2319/" class="nav-link">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="模块" class="dropdown-title"><!----> <span class="title" style="display:;">模块</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bf6a41/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/416f59/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/416f59/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/pages/ecb94e/" class="nav-link">Golang</a></li><li class="dropdown-item"><!----> <a href="/pages/eeefb8/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/pages/5111ec/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/de595b/" class="nav-link">折腾</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/glaucus" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>服务器环境</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/eeefb8/" class="sidebar-link">Centos7安装Python3环境</a></li><li><a href="/pages/63edcf/" class="sidebar-link">从零搭建Linux虚拟机环境</a></li><li><a href="/pages/28ca93/" class="sidebar-link">bash常用的快捷键</a></li><li><a href="/pages/614bb2/" class="sidebar-link">阿里云服务器挂载阿里云盘</a></li><li><a href="/pages/171f94/" class="sidebar-link">centos7防火墙命令</a></li><li><a href="/pages/974867/" class="sidebar-link">阿里云服务器启用密钥登录并禁用密码登录</a></li><li><a href="/pages/ac0219/" class="sidebar-link">Linux服务器文件目录共享映射配置</a></li><li><a href="/pages/ce3161/" class="sidebar-link">腾讯云服务器存在对外攻击行为的处理</a></li><li><a href="/pages/55b76f/" class="sidebar-link">Linux设置swap空间</a></li><li><a href="/pages/ac7e1e/" class="sidebar-link">链接和别名（ln、alias)</a></li><li><a href="/pages/8ac264/" class="sidebar-link">nginx配置</a></li><li><a href="/pages/8ff8c2/" aria-current="page" class="active sidebar-link">Linux访问权限控制之ACL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#什么是acl" class="sidebar-link">什么是ACL</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#为什么使用acl" class="sidebar-link">为什么使用ACL</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#acl的工作原理" class="sidebar-link">ACL的工作原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#访问检查算法" class="sidebar-link">访问检查算法</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#acl命令" class="sidebar-link">ACL命令</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#例子" class="sidebar-link">例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#设置指定用户-组权限" class="sidebar-link">设置指定用户/组权限</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#默认acl权限" class="sidebar-link">默认ACL权限</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#最大有效权限mask" class="sidebar-link">最大有效权限mask</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#删除所有acl权限" class="sidebar-link">删除所有acl权限</a></li><li class="sidebar-sub-header"><a href="/pages/8ff8c2/#删除指定acl权限" class="sidebar-link">删除指定acl权限</a></li></ul></li></ul></li><li><a href="/pages/0717f2/" class="sidebar-link">Linux私钥登陆提示server refused our key</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>应用相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/0750d6/" class="sidebar-link">canal部署</a></li><li><a href="/pages/5ca7f1/" class="sidebar-link">Linux中使用selenium</a></li><li><a href="/pages/6e83fa/" class="sidebar-link">screen的进阶用法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>硬件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b668e1/" class="sidebar-link">linux磁盘操作相关</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/categories/?category=linux" title="分类" data-v-1cd794fe>linux</a></li> <li data-v-1cd794fe><a href="/categories/?category=%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83" title="分类" data-v-1cd794fe>服务器环境</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/glaucus169" target="_blank" title="作者" class="beLink" data-v-1cd794fe>glaucus</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-05-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          Linux访问权限控制之ACL
        </h1>  <div class="theme-vdoing-content content__default"><h1 id="linux访问权限控制之acl"><a href="#linux访问权限控制之acl" class="header-anchor">#</a> Linux访问权限控制之ACL</h1> <h2 id="什么是acl"><a href="#什么是acl" class="header-anchor">#</a> 什么是ACL</h2> <p>ACL即Access Control List，访问控制列表，POSIX 1003.1e/1003.2c标准中定义的权限管理方式。详细内容可以参考<a href="https://www.usenix.org/legacy/publications/library/proceedings/usenix03/tech/freenix03/full_papers/gruenbacher/gruenbacher_html/main.html" target="_blank" rel="noopener noreferrer">POSIX Access Control Lists on Linux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这篇文章。</p> <blockquote><p>POSIX：POSIX是可移植操作系统接口（Portable Operating System Interface of UNIX）的缩写，POSIX标准定义了操作系统应该为应用程序提供的接口标准，是在各种UNIX操作系统上运行的软件的一系列API标准的总称。POSIX标准意在期望获得源代码级别的软件可移植性。换句话说，为一个POSIX兼容的操作系统编写的程序，应该可以在任何其它的POSIX操作系统（即使是来自另一个厂商）上编译执行。</p></blockquote> <h2 id="为什么使用acl"><a href="#为什么使用acl" class="header-anchor">#</a> 为什么使用ACL</h2> <p>经典的Unix权限模型中每个文件系统对象都定义了三组权限，owner、group和other。也就是常用的<code>chmod</code>命令中修改的权限，包括读（r）、写入（w）和执行（x）。但是如果我们想更细颗粒度的控制某些用户的权限时，使用<code>chmod</code>、<code>chown</code>就很难办了。这就需要ACL来针对单一用户、单一文件或目录来进行权限控制。</p> <h2 id="acl的工作原理"><a href="#acl的工作原理" class="header-anchor">#</a> ACL的工作原理</h2> <p>ACL由一系列Access Entry组成，Access Entry又包括三个部分：Entry  type，qualifier(非必须）、权限</p> <p>Entry  type有以下类型：</p> <ul><li><p>Owner/ACL_USER_OBJ : 相当于Linux里file_owner的权限</p></li> <li><p>Named user/ACL_USER: 定义了额外的用户可以对此文件拥有的权限</p></li> <li><p>Owning group/ACL_GROUP_OBJ: 相当于Linux里group的权限</p></li> <li><p>Named group/ACL_GROUP: 定义了额外的组可以对此文件拥有的权限</p></li> <li><p>Mask/ACL_MASK: 定义了ACL_USER, ACL_GROUP_OBJ和ACL_GROUP的最大权限</p></li> <li><p>Others/ACL_OTHER: 相当于Linux里other的权限</p></li></ul> <h3 id="访问检查算法"><a href="#访问检查算法" class="header-anchor">#</a> 访问检查算法</h3> <p>进程请求访问文件系统对象。执行两个步骤。第一步选择与请求进程最匹配的 ACL 条目。ACL 条目按以下顺序查看：所有者、命名用户、（拥有或命名）组、其他。只有一个条目决定访问。第二步检查匹配条目是否包含足够的权限。</p> <p>一个进程可以是多个组中的成员，因此可以匹配多个组条目。如果这些匹配的组条目中的任何一个包含请求的权限，则选择包含请求的权限的条目（无论选择哪个条目，结果都是相同的）。如果没有匹配的组条目包含请求的权限，则无论选择哪个条目都将拒绝访问。</p> <p>访问检查算法可以用伪代码描述如下。</p> <ul><li><p><strong>if</strong></p> <p>进程的用户ID是所有者，所有者条目决定访问权限</p></li> <li><p><strong>else if</strong></p> <p>进程的用户 ID 与指定用户条目之一中的限定符匹配，此条目确定访问权限</p></li> <li><p><strong>else if</strong></p> <p>进程的组 ID 之一与所属组匹配，并且所属组条目包含请求的权限，此条目确定访问权限</p></li> <li><p><strong>else if</strong></p> <p>进程的组 ID 之一与命名组条目之一的限定符匹配，并且此条目包含请求的权限，此条目确定访问权限</p></li> <li><p><strong>else if</strong></p> <p>进程的组 ID 之一与所属组或任何命名组条目匹配，但所属组条目或任何匹配命名组条目均不包含请求的权限，这确定访问被拒绝</p></li> <li><p><strong>else</strong></p> <p>另一个条目决定访问。</p></li> <li><p><strong>if</strong></p> <p>此选择产生的匹配条目是所有者或其他条目，并且它包含请求的权限，授予访问权限</p></li> <li><p><strong>else if</strong></p> <p>匹配条目是命名用户、拥有组或命名组条目，并且此条目包含请求的权限，并且掩码条目也包含请求的权限（或没有掩码条目），授予访问权限</p></li> <li><p><strong>else</strong></p> <p>访问被拒绝。</p></li></ul> <blockquote><p>The access check algorithm can be described in pseudo-code as follows.</p> <ul><li><p><strong>If</strong></p> <p>the user ID of the process is the owner, the owner entry determines access</p></li> <li><p><strong>else if</strong></p> <p>the user ID of the process matches the qualifier in one of the named user entries, this entry determines access</p></li> <li><p><strong>else if</strong></p> <p>one of the group IDs of the process matches the owning group and the owning group entry contains the requested permissions, this entry determines access</p></li> <li><p><strong>else if</strong></p> <p>one of the group IDs of the process matches the qualifier of one of the named group entries and this entry contains the requested permissions, this entry determines access</p></li> <li><p><strong>else if</strong></p> <p>one of the group IDs of the process matches the owning group or any of the named group entries, but neither the owning group entry nor any of the matching named group entries contains the requested permissions, this determines that access is denied</p></li> <li><p><strong>else</strong></p> <p>the other entry determines access.</p></li> <li><p><strong>If</strong></p> <p>the matching entry resulting from this selection is the owner or other entry and it contains the requested permissions, access is granted</p></li> <li><p><strong>else if</strong></p> <p>the matching entry is a named user, owning group, or named group entry and this entry contains the requested permissions and the mask entry also contains the requested permissions (or there is no mask entry), access is granted</p></li> <li><p><strong>else</strong></p> <p>access is denied.</p></li></ul></blockquote> <h2 id="acl命令"><a href="#acl命令" class="header-anchor">#</a> ACL命令</h2> <ul><li><p><code>getfacl</code>：查看某个文件/目录的ACL权限</p></li> <li><p><code>setfacl</code>：设置某个文件/目录的ACL权限</p> <ul><li>-m：设置后续acl参数</li> <li>-x：删除后续acl参数</li> <li>-b：删除全部acl参数</li> <li>-k：删除默认acl参数</li> <li>-R：递归设置acl参数</li> <li>-d：设置默认acl参数</li></ul></li></ul> <h2 id="例子"><a href="#例子" class="header-anchor">#</a> 例子</h2> <h3 id="设置指定用户-组权限"><a href="#设置指定用户-组权限" class="header-anchor">#</a> 设置指定用户/组权限</h3> <ul><li><code>setfacl -m u:user1:rx /test</code>：给user1用户设置<code>/test</code>目录的rx（r-x）权限</li> <li><code>setfacl -m g:group1:rx /test</code>：给group1组设置<code>/test</code>目录的rx（r-x）权限</li> <li><code>setfacl -m o:--x /test</code>：给other设置x（--x）权限（chmod o+x /test）</li></ul> <h3 id="默认acl权限"><a href="#默认acl权限" class="header-anchor">#</a> 默认ACL权限</h3> <p><strong>默认权限下新建的子目录会继承父目录的权限，只有目录才能给默认权限，不是目录的对象仅继承父目录的默认 ACL 作为其访问 ACL。</strong></p> <ul><li><code>setfacl -m d:u:user1:rx /test</code>：给user1用户设置<code>/test</code>目录的默认rx权限</li> <li><code>setfacl -m d:g:group1:rx /test</code>：给group1组设置<code>/test</code>目录的默认rx权限</li> <li><code>setfacl -m d:o:--x /test</code>：给other设置<code>/test</code>目录的默认x权限</li></ul> <h3 id="最大有效权限mask"><a href="#最大有效权限mask" class="header-anchor">#</a> 最大有效权限mask</h3> <p>如上文所描述的，mask定义了ACL_USER, ACL_GROUP_OBJ和ACL_GROUP的最大权限。例如，mask权限为<code>r--</code>，此时不管ACL_USER的权限为多大，就算是``rwx<code>，最终生效的都只会是</code>r--`。<strong>概括来说：用户和用户组的权限必须在mask权限的范围之内才能生效，mask权限就是最大有效权限。</strong></p> <h4 id="修改mask权限"><a href="#修改mask权限" class="header-anchor">#</a> 修改mask权限</h4> <p><code>setfacl -m m:rx /test</code>：设置mask权限为r-x，使用<code>setfacl -m m:权限 路径</code></p> <h3 id="删除所有acl权限"><a href="#删除所有acl权限" class="header-anchor">#</a> 删除所有acl权限</h3> <p><code>setfacl -b /test</code></p> <h3 id="删除指定acl权限"><a href="#删除指定acl权限" class="header-anchor">#</a> 删除指定acl权限</h3> <p><code>setfacl -x u:user1 /test</code></p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/glaucus/edit/main/docs/04.linux/01.服务器环境/11.Linux访问权限控制之ACL.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Linux" title="标签">#Linux</a><a href="/tags/?tag=ACL" title="标签">#ACL</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/31, 11:25:15</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8ac264/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">nginx配置</div></a> <a href="/pages/0717f2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Linux私钥登陆提示server refused our key</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8ac264/" class="prev">nginx配置</a></span> <span class="next"><a href="/pages/0717f2/">Linux私钥登陆提示server refused our key</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/glaucus169" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/glaucusZh" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="mailto:storyxc@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span><a href="http://storyxc.com" target="_blank" style="font-weight:bold">story</a> | <a href="http://beian.miit.gov.cn/" target=_blank>豫ICP备19046036号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a60af80f.js" defer></script><script src="/assets/js/2.6bc427bd.js" defer></script><script src="/assets/js/74.665afdfe.js" defer></script>
  </body>
</html>
